require("rubygems")
require("builder")

module(HL::Formatters):
  class(Html):
    initialize(@tokens, @line-numbers) := #ok

    define(format):
      out = ""

      Builder::XmlMarkup
        new(#(: #target -> out))
        div(#(: #class -> "highlight")) (d):
          d pre (p):
            @tokens each (t):
              p span(t contents, #(: #class -> t type tag))
        
      out
