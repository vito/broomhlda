here = File expand-path("../", _FILE)
$path << here

import("macros")
import("token")
import("lexers")
import("state")
import("formatters/html")

Dir glob(here + "/lexers/imported/*.atomo") each (t):
  puts(File basename(t))
  import(t)

import("lexers/atomo")
import("lexers/haskell")

python = HL::Lexers::Python new(
  File open(here + "/../pygments2broomhlda.py") read
)

puts(HL::Formatters::Html new(python run, false) format)
